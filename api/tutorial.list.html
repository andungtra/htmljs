<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <!--<meta name="viewport" content="width=device-width, initial-scale=1.0">-->
    <meta name="description" content="HtmlJs Tutorials. Each tutorial is editable like Jsfiddle.">
    <meta name="keywords" content="javascript, javascript MVVM framework, MVVM, full-fledged framework, render engine, javascript render engine, fastest MVVM in the world">
    <meta name="author" content="nhan.htmljs@gmail.com">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>HtmlJs tutorial - interactive tutorial of HtmlJs</title>
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
    <!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link rel="stylesheet" type="text/css" href="bootstrap/font-awesome/css/font-awesome.css" />
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">
	<link type="text/css" rel="stylesheet" href="styles/site.cerulean.css">
    <link rel="stylesheet" type="text/css" href="css/SyntaxHighlighter.css" />
    <link rel="stylesheet" type="text/css" href="bootstrap/font-awesome/css/font-awesome.css" />
    <!-- Bootstrap core CSS end -->
    <!--[if lt IE 9]>
        <link rel="stylesheet" type="text/css" href="css/ie_hack.css" />
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="css/doc.min.css" />
    <style>
        .bs-example.explain::after {
            content: "Explaination";
        }
        .bs-example.explain button {
            display: block;
            margin: 10px auto;
        }
        .js-code:after {
           content: "JAVASCRIPT";
        }
        .html-code:after {
           content: "HTML";
        }
        .result:after {
           content: "RESULT";
        }
        .bs-example {
            padding-bottom: 0;
        }
    </style>
</head>
<body data-target="#affix-nav">

    <div class="navbar navbar-default navbar-fixed-top ">
    <div class="container">
        <div class="navbar-header">
            <a class="navbar-brand" href="index.html">&lt;Js&gt;</a>
            <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
        </button>
        </div>
        <div class="navbar-collapse collapse" id="topNavigation">
            <ul class="nav navbar-nav">

                <li class="dropdown">
                    <a href="namespaces.list.html" class="dropdown-toggle" data-toggle="dropdown">
                        <i class="fa fa-tags"></i> Namespaces
                        <b class="caret"></b></a>
                    <ul class="dropdown-menu ">
                        <li><a href="html.html">html</a></li>
                    </ul>
                </li>

                <li class="dropdown">
                    <a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">
                        <i class="fa fa-book"></i> Classes
                        <b class="caret"></b></a>
                    <ul class="dropdown-menu ">
                        <li><a href="html.ajax.html">html.ajax</a></li>
                        <li><a href="html.observable.html">html.observable</a></li>
                        <li><a href="html.observableArray.html">html.observableArray</a></li>
                        <li><a href="html.Promise.html">html.Promise</a></li>
                    </ul>
                </li>

                <li class="dropdown">
                    <a href="tutorial.html" class="dropdown-toggle" data-toggle="dropdown">
                        <i class="fa fa-play"></i> Tutorial
                        <b class="caret"></b></a>
                    <ul class="dropdown-menu ">
                        <li>
                            <a href="tutorial.html">Introduction</a></li>
                        <li>
                            <a href="tutorial.list.html">Working with List</a>
                        </li>
                        <li>
                            <a href="tutorial.jquery.html">jQuery Integration</a>
                        </li>
                        <li><a href="tutorial.howdoesitwork.html">How does it work</a></li>
                    </ul>
                </li>

                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-download"></i> Download <span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        <li><a download="" href="http://nhanfu.github.io/htmljs/dist/html.js">Development version</a></li>
                        <li><a download="" href="http://nhanfu.github.io/htmljs/dist/html.min.js">Production version</a></li>
                    </ul>
                </li>

            </ul>

            <div class="col-sm-3 col-md-3">
                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search" name="q" id="search-input">
                        <div class="input-group-btn">
                            <button class="btn btn-default" id="search-submit"><i class="glyphicon glyphicon-search"></i></button>
                        </div>
                    </div>
                </form>
            </div>

        </div>

    </div>
</div>

    <div class="container">

        <!--------------------------------------------------------------------------------->
        <!-- NAV HEADER -->

        <!-- NAV HEADER END -->
        <!--------------------------------------------------------------------------------->
        <!-- MAIN CONTENTS -->
        <div class="row" style="margin-top: 40px;">
            <div class="col-md-12" style="margin-bottom: 10px;">
                <h1 style="margin-bottom: 0;">Working with List</h1>
                <a class="btn btn-primary" href="#step1" id="previous"><i class="glyphicon glyphicon-step-backward"></i> Previous</a>
                <button class="btn btn-primary" href="#" id="btnAction"><i class="glyphicon glyphicon-play"></i> Run</button>
                <a class="btn btn-primary" href="#dependency" id="next">Next <i class="glyphicon glyphicon-step-forward"></i></a>
            </div>
        </div>

        <div class="row margin5">
            <div class="col-xs-6">
                <div class="bs-example explain">
                    <div style="height: 240px; overflow: auto;"></div>
                </div>
            </div>
            <div class="col-xs-6">
                <div class="bs-example js-code">
                    <div class="js-tab row" id="LB-JavaScript"></div>
                </div>
            </div>
        </div>

        <div class="row margin5">
            <div class="col-xs-6">
                <div class="bs-example html-code">
                    <div class="html-tab row" id="LB-HTML"></div>
                </div>
            </div>
            <div class="col-xs-6">
                <div class="bs-example result example-tab" style="height: 288px; overflow: auto;"></div>
            </div>
        </div>
        <!-- MAIN CONTENTS END -->
        <!---------------------------------------------------------------------->
    </div>

    <!-- TEMPLATE -->
    <div style="display: none;">
        <div id="step1">
            <script type="text/html" class="html help-html"><h3><i class="glyphicon glyphicon-shopping-cart"></i> Shopping cart</h3>

<div class="row" style="margin-bottom: 10px;">
    <div class="col-sm-6"><select class="btn btn-primary form-control" id="prod"></select></div>
    <div class="col-sm-3"><button id="add" class="btn btn-primary">Add</button></div><br />
</div>
<table id="shCart" class="table">
    <tbody>

    </tbody>
</table>

</script>
            <script type="text/html" class="help-js">function ShoppingCartViewModel() {  
    var self = this;  
      
    // Temporarily hard code  
    // We should query from server  
    this.products = [  
        { name: 'iPhone', price: 900 },  
        { name: 'Samsung galaxy', price: 850 },  
        {name: 'Google Pixel', price: 800 },  
        {name: 'Google nexus', price: 750 }  
    ];  
  
    this.selectedItem = html.observable(this.products[0]);  
}  
  
var vm = new ShoppingCartViewModel();

html('#prod').dropdown(vm.products, vm.selectedItem, 'name', 'name');


</script>
            <script type="text/html" class="explain">
                <h3>Binding dropdown</h3>
                In this section, we'll make a small shopping cart app. We'll have a list of products, so that user can choose from.
                We have a list of cart item that display item name and quanity. In that list, we have a button to remove cart item from the list. 
                <br />
                <br />
                First of all, we have some bootstrap HTML template for our app.
                In the template, we have a select box of products and we have to table to display cart items.
                After that, initialize some products within a <span class="bold">ViewModel</span> class
                <pre name="code" class="js">function ShoppingCartViewModel() {
    var self = this;
    
    // Temporarily hard code
    // We should query from server
    this.products = [
        { name: 'iPhone', price: 900 },
        { name: 'Samsung galaxy', price: 850 },
        {name: 'Google Pixel', price: 800 },
        {name: 'Google nexus', price: 750 }
    ];

    this.selectedItem = html.observable(this.products[0]);
}

var vm = new ShoppingCartViewModel();
</pre>
                Then show all product to select box using built-in <span class="bold">dropdown</span> component.
                <pre name="code" class="js">html('#prod').dropdown(vm.products, vm.selectedItem, 'name', 'name');</pre>
                Is that simple for binding select box/dropdown?
                We provide the function the list of products, selected items, display field, value field. All the magic happens behind the scence.

                <button id="help" class="btn btn-primary"><i class="glyphicon glyphicon-flag"></i> Help me!</button>
            </script>
            <div class="previous">tutorial.html#step1</div>
            <div class="next">#step2</div>
        </div>

        <div id="step2"><script type="text/html" class="help-html"><h3><i class="glyphicon glyphicon-shopping-cart"></i> Shopping cart</h3>

<div class="row" style="margin-bottom: 10px;">
    <div class="col-sm-6"><select class="btn btn-primary form-control" id="prod"></select></div>
    <div class="col-sm-3"><button id="add" class="btn btn-primary">Add</button></div><br />
</div>

<table id="shCart" class="table">
    <tbody>

    </tbody>
</table>


</script>
            <script type="text/html" class="help-js">function CartItem(product, quantity) {  
    var self = this;  
    quantity = quantity !== undefined ? quantity : 1;  
    this.product = html.observable(product);  
    this.quantity = html.observable(quantity);  
    this.money = html.observable(function () {  
        return self.product.data.price * self.quantity.data;  
    });  
}

function ShoppingCartViewModel() {  
    var self = this;  
      
    // Temporarily hard code  
    // We should query from server  
    this.products = [  
        { name: 'iPhone', price: 900 },  
        { name: 'Samsung galaxy', price: 850 },  
        {name: 'Google Pixel', price: 800 },  
        {name: 'Google nexus', price: 750 }  
    ];  
  
    this.selectedItem = html.observable(this.products[0]);  
    
    this.cartItems = html.observableArray([  
        new CartItem(self.products[1], 1),  
        new CartItem(self.products[2], 1)  
    ]);
}  
  
var vm = new ShoppingCartViewModel();

html('#prod').dropdown(vm.products, vm.selectedItem, 'name', 'name');

html('#shCart tbody').each(vm.cartItems, function(item, index) {  
    html.tr  
        .td.text(item.product.data.name).$  
        .td.text('$').text(item.product.data.price).$  
        .td  
            .input.attr({type: 'number', min: 1, max: 1000})  
            .className('form-control').value(item.quantity).$  
        .$  
        .td.text('$').text(item.money).$  
        .td  
            .button.className('btn btn-xs btn-danger').text('X').$  
        .$ // end of td element  
    .$; // end of tr element  
});</script>
            <script type="text/html" class="explain">
            <h3>Binding cart items</h3>
            In this section, we'll initialize some cart items, then display them in the table.
            Adding <span class="bold">CartItem</span> class to the top of the JS panel.
            <pre name="code" class="js">function CartItem(product, quantity) {
    var self = this;
    quantity = quantity !== undefined ? quantity : 1;
    this.product = html.observable(product);
    this.quantity = html.observable(quantity);
    this.money = html.observable(function () {
        return self.product.data.price * self.quantity.data;
    });
}</pre>
            This class represents CartItem that should be displayed as a row in table. We have product, quantity and money in it.
            Create an observableArray data in ShoppingCartViewModel.
            <pre name="code" class="js">function ShoppingCartViewModel() {
    // ... leave the products unchanged

    this.cartItems = html.observableArray([
        new CartItem(self.products[1], 1),
        new CartItem(self.products[2], 1)
    ]);
}</pre>
            Adding these cart items to the table, put the code below to the end of JavaScript panel.
            At this time, we only add the name to the list. 
            <pre name="code" class="js">html('#shCart tbody').each(vm.cartItems, function(item, index) {
    var product = item.product.data; // Get data of observable object
    html.tr.td.text(product.name).$;
});</pre>
            The code will generate DOM element for each item in the cart. The code uses HTML tag names for its API.
            You can tell the <span class="bold">tr, td</span> tags here.
            Another weird thing is <span class="bold">$</span>; is that jQuery element or something like that?
            No, it's a signal to tell HtmlJs that you're not working with <span class="bold">td</span> element anymore.
            The context is not go up to the <span class="bold">tr</span> element.

            <br /><br />
            Next, we're going to bind cart item to price, quantity, total, and remove button.
            Replace the last code you've added by the following code
            <pre name="code" class="js">html('#shCart tbody').each(vm.cartItems, function(item, index) {
    html.tr
        .td.text(item.product.data.name).$
        .td.text('$').text(item.product.data.price).$
        .td
            .input.attr({type: 'number', min: 1, max: 1000})
            .className('form-control').value(item.quantity).$
        .$
        .td.text('$').text(item.money).$
        .td
            .button.className('btn btn-xs btn-danger').text('X').$
        .$ // end of td element
    .$; // end of tr element
});
            </pre>
            At this time, if you change quantity, the total price of product will change after it.
            In next section, we'll add more behavior like remove a cart item, add a cart item.
            <button id="help" class="btn btn-primary"><i class="glyphicon glyphicon-flag"></i> Help me!</button>
            </script>
            <div class="previous">#step1</div>
            <div class="next">#step3</div>
        </div>

        <div id="step3"><script type="text/html" class="help-html"><h3><i class="glyphicon glyphicon-shopping-cart"></i> Shopping cart</h3>

<div class="row" style="margin-bottom: 10px;">
    <div class="col-sm-6"><select class="btn btn-primary form-control" id="prod"></select></div>
    <div class="col-sm-3"><button id="add" class="btn btn-primary">Add</button></div><br />
</div>

<table id="shCart" class="table">
    <tbody>

    </tbody>
</table>


</script>
            <script type="text/html" class="help-js">function CartItem(product, quantity) {  
    var self = this;  
    quantity = quantity !== undefined ? quantity : 1;  
    this.product = html.observable(product);  
    this.quantity = html.observable(quantity);  
    this.money = html.observable(function () {  
        return self.product.data.price * self.quantity.data;  
    });  
}

function ShoppingCartViewModel() {  
    var self = this;  
      
    // Temporarily hard code  
    // We should query from server  
    this.products = [  
        { name: 'iPhone', price: 900 },  
        { name: 'Samsung galaxy', price: 850 },  
        {name: 'Google Pixel', price: 800 },  
        {name: 'Google nexus', price: 750 }  
    ];  
  
    this.selectedItem = html.observable(this.products[0]);  
    
    this.cartItems = html.observableArray([  
        new CartItem(self.products[1], 1),  
        new CartItem(self.products[2], 1)  
    ]);
    
    this.removeItem = function (e, item) {  
        self.cartItems.remove(item);  
    };
    
    this.add = function () {
        self.cartItems.push(new CartItem(self.selectedItem.data));
    };
}  
  
var vm = new ShoppingCartViewModel();

html('#prod').dropdown(vm.products, vm.selectedItem, 'name', 'name');

html('#shCart tbody').each(vm.cartItems, function(item, index) {  
    html.tr  
        .td.text(item.product.data.name).$  
        .td.text('$').text(item.product.data.price).$  
        .td  
            .input.attr({type: 'number', min: 1, max: 1000})  
            .className('form-control').value(item.quantity).$  
        .$  
        .td.text('$').text(item.money).$  
        .td  
            .button.className('btn btn-xs btn-danger').text('X')  
            .onClick(vm.removeItem, item).$  
        .$ // end of td element  
    .$; // end of tr element  
});

html('#add').onClick(vm.add);

</script>
            <script type="text/html" class="explain">
            <h3>Adding behaviors</h3>
            We're adding <span class="bold italic">removeItem</span> method.
            <pre class="js" name="code">ShoppingCartViewModel() {
    // ... leave all products and cart items unchanged

    this.removeItem = function (e, item) {
        self.cartItems.remove(item);
    }
};</pre>
            In this method, we only need to remove one cart item from the list.
            When binding this method to the remove buttons, we'll get that cart item row removed.
            Let's bind the method to the View. Adding behavior after button text binding.

            <pre name="code" class="js">.button.className('btn btn-xs btn-danger').text('X')
    .onClick(vm.removeItem, item).$</pre>
            You may ask why do you need to pass item in click event handler. 
            It is the parameter that HtmlJs passes into the event handler, for the ease of working with list item.
            If you don't do it, then you have no ideas about which list item you're working on.
            Adding <span class="bold">"add"</span> method to the end of <span class="bold">ShoppingCartViewModel</span> class.

            <pre name="code" class="js">this.add = function () {
    self.cartItems.push(new CartItem(self.selectedItem.data));
};</pre>

            Then binding it to the UI, just query the add button and calling <span class="bold">onClick</span>.
            <pre name="code" class="js">html('#add').onClick(vm.add);</pre>
            Try to choose a product and click add, now you can see the selected product added to the list.
            <button id="help" class="btn btn-primary"><i class="glyphicon glyphicon-flag"></i> Help me!</button>
            </script>
            <div class="previous">#step2</div>
            <div class="next">#step4</div>
        </div>

        <div id="step4">
            <script class="help-html" type="text/html"><h3><i class="glyphicon glyphicon-shopping-cart"></i> Shopping cart</h3>

<div class="row" style="margin-bottom: 10px;">
    <div class="col-sm-6"><select class="btn btn-primary form-control" id="prod"></select></div>
    <div class="col-sm-3"><button id="add" class="btn btn-primary">Add</button></div><br />
</div>

<table id="shCart" class="table">
    <tbody>

    </tbody>
    <tfoot>
        <tr>
            <td colspan="3">Total</td>
            <td id="total" colspan="2">$</td>
        </tr>
        <tr>
            <td colspan="3" style="color: red;">Total (including discount)</td>
            <td id="total-discount" colspan="2">$</td>
        </tr>
    </tfoot>
</table>


</script>
            <script type="text/html" class="help-js">function CartItem(product, quantity) {  
    var self = this;  
    quantity = quantity !== undefined ? quantity : 1;  
    this.product = html.observable(product);  
    this.quantity = html.observable(quantity);  
    this.money = html.observable(function () {  
        return self.product.data.price * self.quantity.data;  
    });  
}

function ShoppingCartViewModel() {  
    var self = this;  
      
    // Temporarily hard code  
    // We should query from server  
    this.products = [  
        { name: 'iPhone', price: 900 },  
        { name: 'Samsung galaxy', price: 850 },  
        {name: 'Google Pixel', price: 800 },  
        {name: 'Google nexus', price: 750 }  
    ];  
  
    this.selectedItem = html.observable(this.products[0]);  
    
    this.cartItems = html.observableArray([  
        new CartItem(self.products[1], 1),  
        new CartItem(self.products[2], 1)  
    ]);
    
    this.total = html.observable(function () {
        var cartItems = self.cartItems.data,
            total = 0;
        for (var i = 0, j = cartItems.length; i < j; i++) {
            total += cartItems[i].money.data;
        }
        return total;
    });
    
    this.totalDiscount = html.observable(function () {
        return self.total.data * 80 / 100;
    });
    
    this.removeItem = function (e, item) {  
        self.cartItems.remove(item);  
    };
    
    this.add = function () {
        self.cartItems.push(new CartItem(self.selectedItem.data));
    };
}  
  
var vm = new ShoppingCartViewModel();

html('#prod').dropdown(vm.products, vm.selectedItem, 'name', 'name');

html('#shCart tbody').each(vm.cartItems, function(item, index) {  
    html.tr  
        .td.text(item.product.data.name).$  
        .td.text('$').text(item.product.data.price).$  
        .td  
            .input.attr({type: 'number', min: 1, max: 1000})  
            .className('form-control').value(item.quantity).$  
        .$  
        .td.text('$').text(item.money).$  
        .td  
            .button.className('btn btn-xs btn-danger').text('X')  
            .onClick(vm.removeItem, item).$  
        .$ // end of td element  
    .$; // end of tr element  
});

html('#add').onClick(vm.add);

html('#total').text(vm.total);
html('#total-discount').text(vm.totalDiscount);</script>
            <script type="text/html" class="explain">
            <h3>Adding total row</h3>
            In this section, we're adding total row of shopping cart.
            First, we need to set up HTML template, adding total rows in the footer of the table.
            <pre name="code" class="html">&lt;tfoot&gt;
    &lt;tr&gt;
        &lt;td colspan="3"&gt;Total&lt;/td&gt;
        &lt;td id="total" colspan="2"&gt;$&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td style="color: red;" colspan="3"&gt;Total (including discount)&lt;/td&gt;
        &lt;td id="total-discount" colspan="2"&gt;$&lt;/td&gt;
    &lt;/tr&gt;
&lt;/tfoot&gt;</pre>
            Click run to get the footer rows appear. However, they are just static HTML, they don't have any values after currency sign.
            Now we need to add total and totalDiscount properties to the <span class="bold">ShoppingCartViewModel</span> class then display them.
            <pre name="code" class="js">function ShoppingCartViewModel() {
// ... leave other properties and event unchanged

    this.total = html.observable(function () {
        var cartItems = self.cartItems.data,
            total = 0;
        for (var i = 0, j = cartItems.length; i < j; i++) {
            total += cartItems[i].money.data;
        }
        return total;
    });
    
    this.totalDiscount = html.observable(function () {
        return self.total.data * 80 / 100;
    });
}</pre>

            To display these properties is quite simple, add the code below at the bottom of JavaScript
            <pre name="code" class="js">html('#total').text(vm.total);
html('#total-discount').text(vm.totalDiscount);</pre>
            <button id="help" class="btn btn-primary"><i class="glyphicon glyphicon-flag"></i> Help me!</button>

            </script>
            <div class="previous">#step3</div>
            <div class="next">#step5</div>
        </div>

        <div id="step5">
            <script type="text/html" class="explain">
                <h3>Congratulation!</h3>
                Here are some key points that you got now <br />
                <ul style="margin-left: 8px;">
                    <li>- How to bind a list or an observableArray from ViewModel to the View.</li>
                    <li>- How to add or remove an item from an observableArray</li>
                </ul>
                <br />
                In next sections, we'll examine how to validate data.</script>                 
            <div class="previous">#step4</div>
            <div class="next">tutorial.jquery.html#step1</div>
        </div>
    </div>
    <!-- END TEMPLATE -->
    <script type="text/javascript" src="js/jquery-1.8.3.js"></script>
    <script type="text/javascript" src="js/jquery.selectBox.min.js"></script>
    <script type="text/javascript" src="bootstrap/js/bootstrap-select.js"></script>
    <script type="text/javascript" src="bootstrap/js/bootstrap-datepicker.js"></script>
    <script type="text/javascript" src="bootstrap/js/bootstrap.js"></script>

    <script type="text/javascript" src="js/shCore.js"></script>
    <script type="text/javascript" src="js/shBrushJScript.js"></script>
    <script type="text/javascript" src="js/shBrushCss.js"></script>
    <script type="text/javascript" src="js/shBrushXml.js"></script>
    <script type="text/javascript" src="../dist/html.js"></script>
    <script type="text/javascript" src="js/editor/ace.js"></script>
    <script type="text/javascript" src="js/tutorial.js"></script>
    <script type="text/javascript">
        html.router.ignoreRoute(':page.html#:section');
        html.router.ignoreRoute(':page.html');
    </script>
</body>
</html>