!function(e,n){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=n(e):"function"==typeof e.define?e.define(n(e)):e.html=n(e)}(this,function(e){"use strict";function n(e){Object.defineProperty(v,e,{get:function(){var n=c.createElement(e);return null==u?u=n:(u.appendChild(n),u=n),v}})}function t(e,n,t){n*=t;for(var r=0;t>r&&e.children.length;r++)e.removeChild(e.children[n])}function r(e,n,t){var r=null;if(0===n.children.length)throw"You must add at least one element";if(t*=n.children.length,r=e.children[t],!r)for(;n.children.length;)e.appendChild(n.children[0]);for(;n.children.length;)e.insertBefore(n.children[0],r)}function a(e,n,t){e.style.display=n?"none"!==t?t:"":"none"}function i(e,n,t){if(null==v.unwrapData(n))return-1;var r=v.unwrapData(e),a=v.unwrapData(n),i=r.indexOf(a);if(""!==t){var o=r.find(function(e){return e[t]===a[t]});i=r.indexOf(o)}return i}function o(e,n){"true"===n||n===!0?(e.setAttribute("checked","checked"),e.checked=!0):(e.removeAttribute("checked"),e.checked=!1)}var u=null,c=e.document,s=Array.prototype,l=Object.prototype,f=s.isArray||function(e){return"[object Array]"===l.toString.call(e)},d=function(e){return"[object Function]"===l.toString.call(e)},p=function(e){return"string"==typeof e},h=function(e){return"object"==typeof e&&null!=e&&!(e instanceof Date)},v=e.html=function j(e,n){return"string"==typeof e&&(n=n||c,e=n.querySelector(e)),u=e,j};v.find=function(e){return"string"==typeof e&&(u=u.querySelector(e)),v},v.config={allowDuplicateScripts:!1},Object.defineProperty(v,"context",{get:function(){return u}}),v.extend=function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])},v.empty=function(){if(null==u)throw"Expect a context to execute this function. Please query an element first.";for(;u.firstChild;)u.removeChild(u.firstChild);return this};for(var m=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","button","canvas","caption","cite","code","col","colgroup","datalist","dd","del","details","dfn","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","object","ol","ptgroup","option","output","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video"],b=0,y=m.length;y>b;b++)n(m[b]);Object.defineProperty(v,"$",{get:function(){return null!=u&&null!=u.parentElement&&(u=u.parentElement),v}}),["hr","br"].forEach(function(e){Object.defineProperty(v,e,{get:function(){return u.appendChild(c.createElement(e)),v}})});var g=["click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","keydown","keypress","keyup","abort","beforeunload","error","hashchange","load","resize","scroll","unload","blur","change","input","focus","focusin","focusout","inputting","invalid","reset","search","select","submit","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","copy","cut","paste","afterprint","beforeprint","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","animationend","animationiteration","animationstart","transitionend","message","online","offline","popstate","show","storage","toggle","wheel","compositionend","compositionstart","DOMContentLoaded"];g.forEach(function(e){v["on"+e[0].toUpperCase()+e.slice(1)]=function(n,t,r){if(null==u)throw"Expect a context to bind event. Please query an element first.";return null==n?v.trigger(e):u.addEventListener(e,function(e){var r=e.srcElement||e.target;n.call(r,e,t)},r),v}}),v.trigger=function(e){if(!e)throw"Event name must be specified";var n;c.createEvent?(n=c.createEvent("HTMLEvents"),n.initEvent(e,!0,!0)):c.createEventObject&&(n=c.createEventObject(),n.eventType=e);try{return void u[e]()}catch(t){}try{n.eventName=e,u.dispatchEvent?u.dispatchEvent(n):u.fireEvent?u.fireEvent("on"+n.eventType,n):u["on"+e]&&u["on"+e]()}catch(t){}},v.text=function(e){var n=c.createTextNode(v.unwrapData(e));return u.appendChild(n),e instanceof v.observable&&(e.subscribe(function(e){n.textContent=e}),e.bindingNodes.push(u)),v},v.value=function(e){var n=(u.nodeName.toLowerCase(),u),t=v.unwrapData(e);return n.value=null==t?"":t,e instanceof v.observable&&(e.subscribe(function(e){var t=c.querySelector(":focus");t!==n&&(n.value=null==e?"":e)}),n.addEventListener("input",function(){e.data=this.value},!1),e.bindingNodes.push(u)),v},v.attr=function(e,n){if("string"==typeof e){if(void 0===n)return u.getAttribute(e);null!==n&&u.setAttribute(e,n)}else for(var t in e)e.hasOwnProperty(t)&&u.setAttribute(t,e[t]);return this};var w=/-([a-z])/g,x=function(e,n){return n.toUpperCase()},E=function(e){return e?e.replace(w,x):""};v.css=function(e,n){if("string"==typeof e)return e=E(e),null==n?c.defaultView?c.defaultView.getComputedStyle(u,null).getPropertyValue(e):u.currentStyle&&u.currentStyle[e]:(u.style[e]=n,this);for(var t in e)e.hasOwnProperty(t)&&(u.style[E(t)]=e[t]);return this},v.className=function(e){var n=RegExp("\b"+e+"\b","g");return u.className=u.className.replace(n,""),u.className+=""===u.className?e:" "+e,v},v.each=function(e,n){function a(e,a,o,s){var l=0;switch(u=i,s){case"push":n.call(i,a,o);break;case"add":if(o===e.length-1)return void n.call(i,a,o);var f=c.createElement("div");u=f,n.call(f,a,o),r(i,f,o),f=null;break;case"remove":l=i.children.length/(e.length+1),t(i,o,l);break;case"move":l=i.children.length/e.length;var d=o,p=e.indexOf(a);if(d===p)return;for(var h=p*l,m=d>p?i.children[(d+1)*l]:i.children[d*l],b=0;l>b;b++)i.insertBefore(i.children[h],m),p>d&&h++;break;case"render":v.empty();for(var y=e.length||e,g=-1;++g<y;)u=i,n.call(i,null==e[g]?g:e[g],g)}}if(e){var i=u;v(i).empty();for(var o=v.unwrapData(e),s=o.length||o,l=-1;++l<s;)u=i,n.call(i,null==o[l]?l:o[l],l);return u=i,e.subscribe&&e.subscribe(a),this}},v.append=function(e){return null!=u&&u.appendChild(e),v},v.prepend=function(e){if(null!=u){var n=u.parentElement;n.insertBefore(e,n.firstChild)}return v},v.after=function(e){if(null!=u){var n=u.parentElement;n.insertBefore(e,u.nextElementSibling)}return v},v.before=function(e){if(null!=u){var n=u.parentElement;n.insertBefore(e,u)}return v},v.serialize=function(e){if(e=e instanceof v.observable?e._newData:e,null==e)return e;var n=e instanceof Array,t=n?[]:{},r=h(e)||null!=e;if(!r)return e;for(var a in e)if(e[a]&&e[a].subscribe&&!e[a].add){var i=e[a]._newData;t[a]=h(i)?v.unwrapData(e[a]):i}else t[a]=v.serialize(e[a]);if(n){a=0;for(var o=e.length;o>a;a++)t[a]=v.serialize(e[a])}return t},v.visible=function(e){var n=e.data,t=v.context,r=v.css("display");return a(t,n,r),e instanceof v.observable&&e.subscribe(function(e){a(t,e,r)}),v},v.hidden=function(e){var n=e.data,t=v.context,r=v.css("display");return a(t,!n,r),e instanceof v.observable&&e.subscribe(function(e){a(t,!e,r)}),v},v.dropdown=function(e,n,t,r){"select"!==u.nodeName.toLowerCase()&&v.select;var a=u;return v.each(e,function(e){var n=p(r)?e[r]:e,a=p(t)?e[t]:e;v.option.text(a).value(n).$}),a.selectedIndex=i(e,n,r),e.subscribe&&e.subscribe(function(e){a.selectedIndex=i(e,n,r)}),n instanceof v.observable&&(n.bindingNodes.push(a),v(a).onChange(function(){var t=v.unwrapData(e)[this.selectedIndex];n.data=t}),n.subscribe(function(n){a.selectedIndex=i(e,n,r)})),v},v.checkbox=function(e){function n(){null!=e._computedFn?e.notify():e.data=this.checked===!0}"checkbox"!==v.context.type&&v.input.attr({type:"checkbox"});var t=v.context;return o(t,v.unwrapData(e)),e instanceof v.observable?(this.onChange(n).onClick(n),e.subscribe(function(e){var n=c.querySelector(":focus");t!==n&&o(t,e)})):t=null,v},v.unwrapData=function(e){var n=e;for(n instanceof v.observable&&(n=n.data);n instanceof Function;)n=n();return n},v.unwrapNoSideEffect=function(e,n){var t=e;for(e instanceof v.observable&&(t=e._computedFn instanceof Function?e._computedFn:e._newData,n&&(t=e._newData));t instanceof Function;)t=t();return t};var D=[],_=[];return v.observable=function(e){function n(e){var n=_.indexOf(t)>=0;if(!n){_.push(t);var r=v.unwrapNoSideEffect(t,e);t.subscribers.forEach(function(e){e(r,t._oldData)}),t.dependencies.forEach(function(e){e.notify()}),_.splice(_.indexOf(t),1)}}if(!(this instanceof v.observable))return new v.observable(e);if(e instanceof v.observable)return e;var t=this;t._newData=null,t._computedFn=null,t._oldData=null,t.subscribers=[],t.rules=[],t.bindingNodes=[],t.dependencies=[],t.isValid=null,t.delayTime=null,e instanceof Function?(t._computedFn=e,t._newData=t._oldData=v.unwrapData(e)):t._newData=t._oldData=e,t.setDependency=function(e){var n=t.dependencies.indexOf(e);0>n&&e!==t&&t.dependencies.push(e)},t.get=function(){var e;if(d(t._computedFn)){for(D.push(t),e=t._computedFn;e instanceof Function;)e=e();t._oldData=t._newData,t._newData=e,D.pop()}else e=t._newData;return D.length&&t.setDependency(D[D.length-1]),e},t.set=function(e){if(t._newData!==e){var n=null!=t._computedFn;t._oldData=t._newData,t._newData=e,t.notify(n)}},Object.defineProperty(t,"data",{get:t.get,set:t.set}),t.subscribe=function(e){return t.subscribers.indexOf(e)<0&&t.subscribers.push(e),t},t.notify=function(e){null==t.delayTime?n(e):setTimeout(function(){n(e)},t.delayTime)},t.delay=function(e){if("number"!=typeof e)throw TypeError("Delay time must be a number.");return t.delayTime=e,t},t.validators=function(e){t.rules.push(e)},t.validate=function(){return t.isValid=null,t.rules.forEach(function(e){e(t)}),t.isValid}},v.observableArray=function(e){function n(e,n,r,a){var i=_.indexOf(t)>=0;i||(_.push(t),t.subscribers.forEach(function(t){t(e,n,r,a)}),t.dependencies.forEach(function(e){e.notify()}),_.splice(_.indexOf(t),1))}if(null==e)throw TypeError(" data is null or undefined.");if(!(e instanceof Array))throw TypeError(" expected an array but got a non-array parameter.");var t=this;return t instanceof v.observableArray?(v.observable.call(t,e),t.notify=function(e,r,a,i){e=e||t._newData,i=i||"render",null==t.delayTime?n(e,r,a,i):setTimeout(function(){n(e,r,a,i)},t.delayTime)},t.push=function(e){t.add(e)},t.add=function(e,n){n=void 0===n?t._newData.length:n,t._newData.splice(n,0,e),t.notify(t._newData,e,n,"add")},t.remove=function(e){var n=t._newData.indexOf(e);t.removeAt(n)},t.removeAt=function(e){var n=t._newData[e];t._newData.splice(e,1),t.notify(t._newData,n,e,"remove")},void(t.update=function(e,n){t._newData[n]=e,t.notify(t._newData,e,n,"udpate")})):new v.observableArray(e)},v.observableArray.prototype=Object.create(v.observable.prototype),function(){function n(e,n){e.forEach(function(e){e&&e.apply(null,n)})}function t(){var e=null,t=null,r=null;if(e=a.pathname+a.hash,t=o.find(function(n){return n.test(e)}),r=i.find(function(n){return n.pattern.test(e)}),null!=r&&!t){var u=e.match(r.pattern);u.shift(),r.partialURL?v.partial(r.partialURL,r.container).done(function(){var e=null!=r.scripts&&r.scripts.slice(0);if(null!=e&&e.length>0){for(var t=v.scripts.render(e.shift());e.length;)t.then(e.shift());t.done(function(){n(r.doneActions,u)})}else n(r.doneActions,u)}):n(r.doneActions,u)}}var r=e.history,a=e.location,i=[],o=[],u=null;u=function(e){var n="^"+e.replace(/\//g,"\\/").replace(/\?/g,"\\?").replace(/:([0-9a-zA-Z-_]*)/g,"([0-9a-zA-Z-_]*)")+"$";return RegExp(n)},v.router={},v.router.when=function(e,n){var t=i.find(function(n){return n.originalPattern===e});if(t)throw"Duplicated pattern: "+e+". Please provide another pattern!";return i.push({originalPattern:e,pattern:u(e),doneActions:[n]}),v.router},v.router.partial=function(e,n){if(0===i.length)throw"Expected at least a registered route.";return i[i.length-1].partialURL=e,i[i.length-1].container=n||"[body]",this},v.router.scripts=function(e){if(0===i.length)throw"Expected at least a registered route.";i[i.length-1].scripts=i[i.length-1].scripts||[];var n=i[i.length-1].scripts;return e instanceof Array?n.push.apply(n,e):n.push(e),this},v.router.done=function(e){if(null==e)throw TypeError("Callback action is null or undefined.");var n=i[i.length-1].doneActions;return n.push(e),this},v.router.getRouteParam=function(){var e=a.pathname+a.hash,n=i.find(function(n){return n.pattern.test(e)}),t=e.match(n.pattern);t.shift();var r={},o=n.originalPattern.match(/:(\w*)/g);return(o=o&&o.map(function(e){return e.replace(":","")}))?(o.forEach(function(e,n){r[e]=t[n]}),r):null},v.router.ignoreRoute=function(e){var n=i.find(function(n){return n.originalPattern===e});if(n)throw"Pattern has been registered! Please check the routing configuration.";return o.push(u(e)),this},r.pushState?v(e).onPopstate(t):v(e).onHashchange(t),v.ready=function(e){c.addEventListener("DOMContentLoaded",function(){e()})},c.addEventListener("DOMContentLoaded",function(){t()})}.call(v),function(){function e(e){e.parentElement.removeChild(e);var n=e.jsonpId;v.ajax["jsonpId"+n]=void 0,e=null}v.Promise=function(e){if(!(this instanceof v.Promise))return new v.Promise(e);var n=this;n.doneActions=[],n.failActions=[],n.resolve=function(e){n.doneActions.forEach(function(n){null!=n&&n(e)})},n.reject=function(e){n.failActions.forEach(function(n){null!=n&&n(e)})},n.done=function(e){return d(e)&&n.doneActions.push(e),n},n.fail=function(e){return d(e)&&n.failActions.push(e),n},setTimeout(function(){e(n.resolve,n.reject)})};var n=0,t=[];v.ajax=function(r,a,i,o){if(!(this instanceof v.ajax))return new v.ajax(r,a,i,o);var u,s,l,f={},d=null,h=null;i=i||"GET",o=void 0!==o?o:!0;var m=v.Promise(function(p,m){var b=t.find(function(e){return e.url===r});if(null!=b)return void p(b.data);if(u){var y=r+(/\?/.test(r)?"&":"?"),g=c.getElementsByTagName("head")[0],w=c.createElement("script"),x=[],E="";n++,v.ajax["jsonpId"+n]=u,a=a||{},a.callback="html.ajax.jsonpId"+n;for(E in a)a.hasOwnProperty(E)&&x.push(E+"="+encodeURIComponent(a[E]));return y+=x.join("&"),w.type="text/javascript",w.src=y,g.appendChild(w),w.jsonpId=n,void(void 0!==w.onreadystatechange&&(w.onload=w.onreadystatechange=function(){("complete"===this.readyState||"loaded"===this.readyState)&&e(w)}))}var D=new XMLHttpRequest;D.open(i,r,o,s,l),D.onreadystatechange=function(){if(4===D.readyState&&200===D.status){var e;try{e=null!=d?d(D.responseText||D.responseXML):D.responseText||D.responseXML}catch(n){m("Invalid data type.",D)}p(e)}else 4===D.readyState&&200!==D.status&&m(D.response,D)};for(var _ in f)f.hasOwnProperty(_)&&D.setRequestHeader(_,f[_]);h&&h>0&&(D.timeout=h,D.ontimeout=function(){m("timeout",D)}),D.send(a)});this.jsonp=function(e){return u=e,this},this.authenticate=function(e,n){return s=e,l=n,this},this.header=function(e,n){return void 0!==n&&p(e)?f[e]=n:v.extend(f,e),this},this.parser=function(e){return d=e,this},this.timeout=function(e){return h=e,this},this.contentType=function(e){return v.extend(f,{"Content-type":e}),this},this.done=m.done,this.fail=m.fail},v.ajax.mock=function(e,n){t.push({url:e,data:n})},v.ajax.clearMock=function(){for(;t.length;)t.pop()},this.getJSON=function(e,n,t){var r=[];for(var a in n)n.hasOwnProperty(a)&&r.push(encodeURIComponent(a)+"="+encodeURIComponent(n[a]));return v.ajax(r.length?e+"?"+r.join("&"):e,null,"GET",t).parser(JSON.parse)},this.postJSON=function(e,n,t){return v.ajax(e,JSON.stringify(n),"POST",t).header({"Content-type":"application/json"}).parser(JSON.parse)},v.partial=function(e,n){if(null==n)throw"containerSelector is null or undefined";var t=v(n).context,r=null,a=[],i=v.ajax(e);return i.done(function(e){if(v(t).empty(),t.innerHTML=e,t=null,null!=r){var n=v.scripts.render(r);n.done(function(){a.forEach(function(n){null!=n&&n(e)})})}else a.forEach(function(n){null!=n&&n(e)})}),i.scripts=function(e){return r=e,i},i.done=function(e){return d(e)&&a.push(e),i},i}}.call(v),function(){var n={},t={},r=[],a=[],i=[],o=[],u=c.getElementsByTagName("head")[0]||v(c).head.context,s=function(){var n,t=!1;if(p(a)?r.forEach(function(e){e.url===a&&e.isLoaded&&(t=!0)}):a instanceof Array&&(t=!0,a.forEach(function(e){var n=r.find(function(n){return n.url===e&&n.isLoaded});n||(t=!1)})),t){for(;d(i[0]);)n=i.shift(),o.push(n);if(0===i.length)for(var u=o.length-1;u>=0;u--)n=o[u],n.apply(e,v.module(n.__requiredModules__)||[]);return v.scripts.render(i.shift())}};v.config.allowDuplicate=!1;var l=function(e,n){var t=r.find(function(n){return n.url===e});if(t&&!v.config.allowDuplicate)return void n();var a=c.createElement("script");a.type="text/javascript",a.charset="utf-8",a.async=!0;var i=function(){a.parentElement.removeChild(a),r.push({url:e,isLoaded:!0}),n()};return void 0!==a.onreadystatechange?a.onload=a.onreadystatechange=function(){("complete"===this.readyState||"loaded"===this.readyState)&&i()}:v(a).onLoad(i),a.src=e,u.appendChild(a),a},h=function(e){var n=r.find(function(n){return n.url===e});if(!n||v.config.allowDuplicate){var t=c.createElement("link");return t.type="text/css",t.rel="stylesheet",t.href=e,t.async=!0,u.appendChild(t),r.push({url:e,isLoaded:!0}),t}};v.scripts=function(e){v.extend(n,e)},v.styles=function(e){v.extend(t,e)},v.scripts.render=function(e){var t=n[e];if(t||(t=e),p(t))a=t,l(t,s);else if(f(t)){a=t;for(var r=0,i=t.length;i>r;r++)l(t[r],s)}return v.scripts},v.styles.render=function(e){var n=t[e];if(n||(n=e),p(n))h(n);else if(n instanceof Array)for(var r=0,a=n.length;a>r;r++)h(n[r]);return this},v.scripts.then=function(e){return i.push(e),v.scripts},v.styles.then=function(e){return v.styles.render(e)},v.scripts.done=function(e,n){return i.push(e),e.__requiredModules__=n,v.scripts},v.require=v.scripts.render}(),function(){var e={},n={};v.module=function(t,r){if(null==r){var a=t instanceof Array,i=[];t=a?t:[t];for(var o=0,u=t.length;u>o;o++)i.push(n[t[o]]||e[t[o]]);return a?i:i[0]}return e[t]=r,v},v.mockModule=function(e,t){return n[e]=t,v}}(),v});