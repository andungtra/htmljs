!function(e,n){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=n(e):"function"==typeof e.define?e.define(n(e)):e.html=n(e)}(this,function(e){"use strict";function n(e){Object.defineProperty(g,e,{get:function(){var n=l.createElement(e);return null==c?c=n:(c.appendChild(n),c=n),g}})}function t(e,n,t){if(n=y(n),t=y(t),""!==t){for(var r=e.className;-1!==r.indexOf(t);)r=r.replace(t,""),r=y(r);e.className=r}""!==n&&(e.className+=""===e.className?n:" "+n)}function r(e,n,t){n*=t;for(var r=0;t>r&&e.children.length;r++)e.removeChild(e.children[n])}function a(e,n,t){var r=null;if(0===n.children.length)throw"You must add at least one element";if(t*=n.children.length,r=e.children[t],!r)for(;n.children.length;)e.appendChild(n.children[0]);for(;n.children.length;)e.insertBefore(n.children[0],r)}function i(e,n,t){e.style.display=n?"none"!==t?t:"":"none"}function o(e,n,t){if(null==g.unwrapData(n))return-1;var r=g.unwrapData(e),a=g.unwrapData(n),i=r.indexOf(a);if(""!==t){var o=r.find(function(e){return e[t]===a[t]});i=r.indexOf(o)}return i}function u(e,n){"true"===n||n===!0?(e.setAttribute("checked","checked"),e.checked=!0):(e.removeAttribute("checked"),e.checked=!1)}var c=null,s=null,l=e.document,f=Array.prototype,d=Object.prototype,p=f.isArray||function(e){return"[object Array]"===d.toString.call(e)},h=function(e){return"[object Function]"===d.toString.call(e)},v=function(e){return"string"==typeof e},m=function(e){return"object"==typeof e&&null!=e&&!(e instanceof Date)},b=String.prototype.trim,y=function(e){return b&&b.call(e)||e.replace(/^\s+|\s+$/,"")},g=e.html=function C(e,n){return"string"==typeof e?(n=n||l,e=n.querySelector(e)):"function"==typeof e&&C.ready(e),c=e,C};g.find=function(e){return"string"==typeof e&&(c=c.querySelector(e)),g},g.config={allowDuplicateScripts:!1},Object.defineProperty(g,"context",{get:function(){return c}}),g.extend=function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])},g.empty=function(){if(null==c)throw"Expect a context to execute this function. Please query an element first.";for(;c.firstChild;)c.removeChild(c.firstChild);return this};for(var w=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","button","canvas","caption","cite","code","col","colgroup","datalist","dd","del","details","dfn","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","object","ol","ptgroup","option","output","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video"],E=0,x=w.length;x>E;E++)n(w[E]);Object.defineProperty(g,"$",{get:function(){return null!=c&&null!=c.parentElement&&(c=c.parentElement),g}}),["hr","br"].forEach(function(e){Object.defineProperty(g,e,{get:function(){return c.appendChild(l.createElement(e)),g}})});var D=["click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","keydown","keypress","keyup","abort","beforeunload","error","hashchange","load","resize","scroll","unload","blur","change","input","focus","focusin","focusout","inputting","invalid","reset","search","select","submit","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","copy","cut","paste","afterprint","beforeprint","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","animationend","animationiteration","animationstart","transitionend","message","online","offline","popstate","show","storage","toggle","wheel","compositionend","compositionstart","DOMContentLoaded"];D.forEach(function(e){g["on"+e[0].toUpperCase()+e.slice(1)]=function(n,t,r){if(null==c)throw"Expect a context to bind event. Please query an element first.";return null==n?g.trigger(e):c.addEventListener(e,function(e){var r=e.srcElement||e.target;s=r,n.call(r,e,t)},r),g}}),g.trigger=function(e){if(!e)throw"Event name must be specified";var n;l.createEvent?(n=l.createEvent("HTMLEvents"),n.initEvent(e,!0,!0)):l.createEventObject&&(n=l.createEventObject(),n.eventType=e);try{return void c[e]()}catch(t){}try{n.eventName=e,c.dispatchEvent?c.dispatchEvent(n):c.fireEvent?c.fireEvent("on"+n.eventType,n):c["on"+e]&&c["on"+e]()}catch(t){}},g.text=function(e){var n=l.createTextNode(g.unwrapData(e));return c.appendChild(n),e instanceof g.observable&&(e.subscribe(function(e){n.textContent=e}),e.bindingNodes.push(c)),g},g.value=function(e){var n=(c.nodeName.toLowerCase(),c),t=g.unwrapData(e);return n.value=null==t?"":t,e instanceof g.observable&&(e.subscribe(function(e){s!==n&&(n.value=null==e?"":e)}),n.addEventListener("input",function(){e.data=this.value},!1),e.bindingNodes.push(c)),g},g.attr=function(e,n){if("string"==typeof e){if(void 0===n)return c.getAttribute(e);null!==n&&c.setAttribute(e,n)}else for(var t in e)e.hasOwnProperty(t)&&c.setAttribute(t,e[t]);return this};var _=/-([a-z])/g,j=function(e,n){return n.toUpperCase()},O=function(e){return e?e.replace(_,j):""};g.css=function(e,n){if("string"==typeof e)return e=O(e),null==n?l.defaultView?l.defaultView.getComputedStyle(c,null).getPropertyValue(e):c.currentStyle&&c.currentStyle[e]:(c.style[e]=n,this);for(var t in e)e.hasOwnProperty(t)&&(c.style[O(t)]=e[t]);return this},g.className=function(e){if(null==e)return g;var n=g.unwrapData(e),r=g.context;return t(r,n,n),e instanceof g.observable&&e.subscribe(function(e,n){t(r,e,n)}),g},g.each=function(e,n){function t(e,t,o,u){var s=0;switch(c=i,u){case"push":n.call(i,t,o);break;case"add":if(o===e.length-1)return void n.call(i,t,o);var f=l.createElement("div");c=f,n.call(f,t,o),a(i,f,o),f=null;break;case"remove":s=i.children.length/(e.length+1),r(i,o,s);break;case"move":s=i.children.length/e.length;var d=o,p=e.indexOf(t);if(d===p)return;for(var h=p*s,v=d>p?i.children[(d+1)*s]:i.children[d*s],m=0;s>m;m++)i.insertBefore(i.children[h],v),p>d&&h++;break;case"render":g.empty();for(var b=e.length||e,y=-1;++y<b;)c=i,n.call(i,null==e[y]?y:e[y],y)}}if(e){var i=c;g(i).empty();for(var o=g.unwrapData(e),u=o.length||o,s=-1;++s<u;)c=i,n.call(i,null==o[s]?s:o[s],s);return c=i,e.subscribe&&e.subscribe(t),this}},g.append=function(e){return null!=c&&c.appendChild(e),g},g.prepend=function(e){if(null!=c){var n=c.parentElement;n.insertBefore(e,n.firstChild)}return g},g.after=function(e){if(null!=c){var n=c.parentElement;n.insertBefore(e,c.nextElementSibling)}return g},g.before=function(e){if(null!=c){var n=c.parentElement;n.insertBefore(e,c)}return g},g.serialize=function(e){if(e=e instanceof g.observable?e._newData:e,null==e)return e;var n=e instanceof Array,t=n?[]:{},r=m(e)||null!=e;if(!r)return e;for(var a in e)if(e[a]&&e[a].subscribe&&!e[a].add){var i=e[a]._newData;t[a]=m(i)?g.unwrapData(e[a]):i}else t[a]=g.serialize(e[a]);if(n){a=0;for(var o=e.length;o>a;a++)t[a]=g.serialize(e[a])}return t},g.visible=function(e){var n=e.data,t=g.context,r=g.css("display");return i(t,n,r),e instanceof g.observable&&e.subscribe(function(e){i(t,e,r)}),g},g.hidden=function(e){var n=e.data,t=g.context,r=g.css("display");return i(t,!n,r),e instanceof g.observable&&e.subscribe(function(e){i(t,!e,r)}),g},g.dropdown=function(e,n,t,r){"select"!==c.nodeName.toLowerCase()&&g.select;var a=c;return g.each(e,function(e){var n=v(r)?e[r]:e,a=v(t)?e[t]:e;g.option.text(a).value(n).$}),a.selectedIndex=o(e,n,r),e.subscribe&&e.subscribe(function(e){a.selectedIndex=o(e,n,r)}),n instanceof g.observable&&(n.bindingNodes.push(a),g(a).onChange(function(){var t=g.unwrapData(e)[this.selectedIndex];n.data=t}),n.subscribe(function(n){a.selectedIndex=o(e,n,r)})),g},g.checkbox=function(e){function n(){null!=e._computedFn?e.notify():e.data=this.checked===!0}"checkbox"!==g.context.type&&g.input.attr({type:"checkbox"});var t=g.context;return u(t,g.unwrapData(e)),e instanceof g.observable?(this.onChange(n).onClick(n),e.subscribe(function(e){s!==t&&u(t,e)})):t=null,g},g.unwrapData=function(e){var n=e;return n instanceof g.observable&&(n=n.data),n},g.unwrapNoSideEffect=function(e,n){var t=e;for(e instanceof g.observable&&(t=e._computedFn instanceof Function?e._computedFn:e._newData,n&&(t=e._newData));t instanceof Function;)t=t();return t};var k=[],A=[];return g.observable=function(e){function n(){var e=A.indexOf(t)>=0;if(!e){A.push(t);var n=g.unwrapData(t);t.subscribers.forEach(function(e){e(n,t._oldData)}),t.dependencies.forEach(function(e){e.notify()}),A.splice(A.indexOf(t),1)}}if(!(this instanceof g.observable))return new g.observable(e);if(e instanceof g.observable)return e;var t=this;t._newData=null,t._computedFn=null,t._oldData=null,t.subscribers=[],t.rules=[],t.bindingNodes=[],t.dependencies=[],t.isValid=null,t.delayTime=null,e instanceof Function?(t._computedFn=e,k.push(t),t._newData=t._oldData=e(),k.pop()):t._newData=t._oldData=e,t.setDependency=function(e){var n=t.dependencies.indexOf(e);0>n&&e!==t&&t.dependencies.push(e)},t.get=function(){var e;if(h(t._computedFn)){for(k.push(t),e=t._computedFn;e instanceof Function;)e=e();t._oldData=t._newData,t._newData=e,k.pop()}else e=t._newData;return k.length&&t.setDependency(k[k.length-1]),e},t.set=function(e){t._newData!==e&&(t._oldData=t._newData,t._newData=e,t.notify())},Object.defineProperty(t,"data",{get:t.get,set:t.set}),t.subscribe=function(e){return t.subscribers.indexOf(e)<0&&t.subscribers.push(e),t};var r;t.notify=function(){return null==t._computedFn&&null==t.delayTime?void n():(clearTimeout(r),void(r=setTimeout(function(){n()},t.delayTime)))},t.delay=function(e){if("number"!=typeof e)throw TypeError("Delay time must be a number.");return t.delayTime=e,t},t.validators=function(e){t.rules.push(e)},t.validate=function(){return t.isValid=null,t.rules.forEach(function(e){e(t)}),t.isValid}},g.observableArray=function(e){function n(e,n,r,a){var i=A.indexOf(t)>=0;i||(A.push(t),t.subscribers.forEach(function(t){t(e,n,r,a)}),t.dependencies.forEach(function(e){e.notify()}),A.splice(A.indexOf(t),1))}if(null==e)throw TypeError(" data is null or undefined.");if(!(e instanceof Array))throw TypeError(" expected an array but got a non-array parameter.");var t=this;return t instanceof g.observableArray?(g.observable.call(t,e),t.notify=function(e,r,a,i){e=e||t._newData,i=i||"render",n(e,r,a,i)},t.push=function(e){t.add(e)},t.add=function(e,n){n=void 0===n?t._newData.length:n,t._newData.splice(n,0,e),t.notify(t._newData,e,n,"add")},t.remove=function(e){var n=t._newData.indexOf(e);t.removeAt(n)},t.removeAt=function(e){var n=t._newData[e];t._newData.splice(e,1),t.notify(t._newData,n,e,"remove")},void(t.update=function(e,n){t._newData[n]=e,t.notify(t._newData,e,n,"udpate")})):new g.observableArray(e)},g.observableArray.prototype=Object.create(g.observable.prototype),function(){g.ready=function(e){a(e),c()};var n=!1,t=!1,r=[],a=function(e){h(e)&&r.push(e)},i=function(){for(;r.length;)r.shift()();a=function(e){e()}},o=function(){l.addEventListener?l.removeEventListener("DOMContentLoaded",o,!1):l.detachEvent("onreadystatechange",o),u()},u=function(){if(!t){if(!l.body)return setTimeout(u,1);t=!0,i()}},c=function(){var t=!1;if(!n)if(n=!0,"loading"!==l.readyState&&u(),l.addEventListener)l.addEventListener("DOMContentLoaded",o,!1),e.addEventListener("load",o,!1);else if(l.attachEvent){l.attachEvent("onreadystatechange",o),e.attachEvent("onload",o);try{t=null===e.frameElement}catch(r){}l.documentElement.doScroll&&t&&s()}},s=function(){if(!t){try{l.documentElement.doScroll("left")}catch(e){return void setTimeout(s,1)}u()}}}(),function(){function n(e,n){e.forEach(function(e){e&&e.apply(null,n)})}function t(){var e=null,t=null,r=null;if(e=a.pathname+a.hash,t=o.find(function(n){return n.test(e)}),r=i.find(function(n){return n.pattern.test(e)}),null!=r&&!t){var u=e.match(r.pattern);u.shift(),r.partialURL?g.partial(r.partialURL,r.container).done(function(){var e=null!=r.scripts&&r.scripts.slice(0);if(null!=e&&e.length>0){for(var t=g.scripts.render(e.shift());e.length;)t.then(e.shift());t.done(function(){n(r.doneActions,u)})}else n(r.doneActions,u)}):n(r.doneActions,u)}}var r=e.history,a=e.location,i=[],o=[],u=null;u=function(e){var n="^"+e.replace(/\//g,"\\/").replace(/\?/g,"\\?").replace(/:([0-9a-zA-Z-_]*)/g,"([0-9a-zA-Z-_]*)")+"$";return RegExp(n)},g.router={},g.router.when=function(e,n){var t=i.find(function(n){return n.originalPattern===e});if(t)throw"Duplicated pattern: "+e+". Please provide another pattern!";return i.push({originalPattern:e,pattern:u(e),doneActions:[n]}),g.router},g.router.partial=function(e,n){if(0===i.length)throw"Expected at least a registered route.";return i[i.length-1].partialURL=e,i[i.length-1].container=n||"[body]",this},g.router.scripts=function(e){if(0===i.length)throw"Expected at least a registered route.";i[i.length-1].scripts=i[i.length-1].scripts||[];var n=i[i.length-1].scripts;return e instanceof Array?n.push.apply(n,e):n.push(e),this},g.router.done=function(e){if(null==e)throw TypeError("Callback action is null or undefined.");var n=i[i.length-1].doneActions;return n.push(e),this},g.router.getRouteParam=function(){var e=a.pathname+a.hash,n=i.find(function(n){return n.pattern.test(e)}),t=e.match(n.pattern);t.shift();var r={},o=n.originalPattern.match(/:(\w*)/g);return(o=o&&o.map(function(e){return e.replace(":","")}))?(o.forEach(function(e,n){r[e]=t[n]}),r):null},g.router.ignoreRoute=function(e){var n=i.find(function(n){return n.originalPattern===e});if(n)throw"Pattern has been registered! Please check the routing configuration.";return o.push(u(e)),this},r.pushState?g(e).onPopstate(t):g(e).onHashchange(t),g.ready(function(){t()})}.call(g),function(){function e(e){e.parentElement.removeChild(e);var n=e.jsonpId;g.ajax["jsonpId"+n]=void 0,e=null}g.Promise=function(e){if(!(this instanceof g.Promise))return new g.Promise(e);var n=this;n.doneActions=[],n.failActions=[],n.resolve=function(e){n.doneActions.forEach(function(n){null!=n&&n(e)})},n.reject=function(e){n.failActions.forEach(function(n){null!=n&&n(e)})},n.done=function(e){return h(e)&&n.doneActions.push(e),n},n.fail=function(e){return h(e)&&n.failActions.push(e),n},setTimeout(function(){e(n.resolve,n.reject)})};var n=0,t=[];g.ajax=function(r,a,i,o){if(!(this instanceof g.ajax))return new g.ajax(r,a,i,o);var u,c,s,f={},d=null,p=null;i=i||"GET",o=void 0!==o?o:!0;var h=g.Promise(function(h,v){var m=t.find(function(e){return e.url===r});if(null!=m)return void h(m.data);if(u){var b=r+(/\?/.test(r)?"&":"?"),y=l.getElementsByTagName("head")[0],w=l.createElement("script"),E=[],x="";n++,g.ajax["jsonpId"+n]=u,a=a||{},a.callback="html.ajax.jsonpId"+n;for(x in a)a.hasOwnProperty(x)&&E.push(x+"="+encodeURIComponent(a[x]));return b+=E.join("&"),w.type="text/javascript",w.src=b,y.appendChild(w),w.jsonpId=n,void(void 0!==w.onreadystatechange&&(w.onload=w.onreadystatechange=function(){("complete"===this.readyState||"loaded"===this.readyState)&&e(w)}))}var D=new XMLHttpRequest;D.open(i,r,o,c,s),D.onreadystatechange=function(){if(4===D.readyState&&200===D.status){var e;try{e=null!=d?d(D.responseText||D.responseXML):D.responseText||D.responseXML}catch(n){v("Invalid data type.",D)}h(e)}else 4===D.readyState&&200!==D.status&&v(D.response,D)};for(var _ in f)f.hasOwnProperty(_)&&D.setRequestHeader(_,f[_]);p&&p>0&&(D.timeout=p,D.ontimeout=function(){v("timeout",D)}),D.send(a)});this.jsonp=function(e){return u=e,this},this.authenticate=function(e,n){return c=e,s=n,this},this.header=function(e,n){return void 0!==n&&v(e)?f[e]=n:g.extend(f,e),this},this.parser=function(e){return d=e,this},this.timeout=function(e){return p=e,this},this.contentType=function(e){return g.extend(f,{"Content-type":e}),this},this.done=h.done,this.fail=h.fail},g.ajax.mock=function(e,n){t.push({url:e,data:n})},g.ajax.clearMock=function(){for(;t.length;)t.pop()},this.getJSON=function(e,n,t){var r=[];for(var a in n)n.hasOwnProperty(a)&&r.push(encodeURIComponent(a)+"="+encodeURIComponent(n[a]));return g.ajax(r.length?e+"?"+r.join("&"):e,null,"GET",t).parser(JSON.parse)},this.postJSON=function(e,n,t){return g.ajax(e,JSON.stringify(n),"POST",t).header({"Content-type":"application/json"}).parser(JSON.parse)},g.partial=function(e,n){if(null==n)throw"containerSelector is null or undefined";var t=g(n).context,r=null,a=[],i=g.ajax(e);return i.done(function(e){if(g(t).empty(),t.innerHTML=e,t=null,null!=r){var n=g.scripts.render(r);n.done(function(){a.forEach(function(n){null!=n&&n(e)})})}else a.forEach(function(n){null!=n&&n(e)})}),i.scripts=function(e){return r=e,i},i.done=function(e){return h(e)&&a.push(e),i},i}}.call(g),function(){var n={},t={},r=[],a=[],i=[],o=[],u=l.getElementsByTagName("head")[0]||g(l).head.context,c=function(){var n,t=!1;if(v(a)?r.forEach(function(e){e.url===a&&e.isLoaded&&(t=!0)}):a instanceof Array&&(t=!0,a.forEach(function(e){var n=r.find(function(n){return n.url===e&&n.isLoaded});n||(t=!1)})),t){for(;h(i[0]);)n=i.shift(),o.push(n);if(0===i.length)for(var u=o.length-1;u>=0;u--)n=o[u],n.apply(e,g.module(n.__requiredModules__)||[]);return g.scripts.render(i.shift())}};g.config.allowDuplicate=!1;var s=function(e,n){var t=r.find(function(n){return n.url===e});if(t&&!g.config.allowDuplicate)return void n();var a=l.createElement("script");a.type="text/javascript",a.charset="utf-8",a.async=!0;var i=function(){a.parentElement.removeChild(a),r.push({url:e,isLoaded:!0}),n()};return void 0!==a.onreadystatechange?a.onload=a.onreadystatechange=function(){("complete"===this.readyState||"loaded"===this.readyState)&&i()}:g(a).onLoad(i),a.src=e,u.appendChild(a),a},f=function(e){var n=r.find(function(n){return n.url===e});if(!n||g.config.allowDuplicate){var t=l.createElement("link");return t.type="text/css",t.rel="stylesheet",t.href=e,t.async=!0,u.appendChild(t),r.push({url:e,isLoaded:!0}),t}};g.scripts=function(e){g.extend(n,e)},g.styles=function(e){g.extend(t,e)},g.scripts.render=function(e){var t=n[e];if(t||(t=e),v(t))a=t,s(t,c);else if(p(t)){a=t;for(var r=0,i=t.length;i>r;r++)s(t[r],c)}return g.scripts},g.styles.render=function(e){var n=t[e];if(n||(n=e),v(n))f(n);else if(n instanceof Array)for(var r=0,a=n.length;a>r;r++)f(n[r]);return this},g.scripts.then=function(e){return i.push(e),g.scripts},g.styles.then=function(e){return g.styles.render(e)},g.scripts.done=function(e,n){return i.push(e),e.__requiredModules__=n,g.scripts},g.require=g.scripts.render}(),function(){var e={},n={};g.module=function(t,r){if(null==r){var a=t instanceof Array,i=[];t=a?t:[t];for(var o=0,u=t.length;u>o;o++)i.push(n[t[o]]||e[t[o]]);return a?i:i[0]}return e[t]=r,g},g.mockModule=function(e,t){return n[e]=t,g}}(),g});